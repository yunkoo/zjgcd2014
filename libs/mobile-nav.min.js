angular.module("ajoslin.mobile-navigate",[]).run(["$navigate","$rootScope",function(b,a){document.addEventListener("deviceready",function(){document.addEventListener("backbutton",function(){a.$apply(function(){var c=b.back();if(!c){navigator.app.exitApp()}})})})}]);angular.module("ajoslin.mobile-navigate").provider("$change",function(){var g={modal:["modal",""],none:["",""]};var c={prefix:"mb-"};var f="in";var h="out";var b="reverse";var d="done";var e=(function(){var i=navigator.userAgent.toLowerCase();return i.indexOf("android")>-1})();var a;if(e){a="webkitAnimationEnd"}else{a="animationName" in document.documentElement.style?"animationend":"webkitAnimationEnd"}this.setTransitionPreset=function(k,j,i){j=j||"";i=i||j;g[k]=[j,i]};this.options=function(i){c=angular.extend(c,i||{})};this.$get=["$q","$rootScope",function(j,i){return function k(r,o,l,s,y){y=angular.extend(y||{},c);var x=j.defer(),p,m;function u(z){return z.reduce(function(B,A){return B+(A?(" "+y.prefix+A):"")},"")}var t=g[l]?g[l]:[l,l];r.css("z-index","-100");r[0].offsetWidth+=0;var v=u([s?h:f,(p=t[s?1:0]),s&&b||""]);r.addClass(v);var w;if(o){w=u([s?f:h,(m=t[s?0:1]),s&&b||""]);o.addClass(w)}r.css("z-index","");r[0].offsetWidth+=0;function q(){i.$apply(function(){x.resolve()})}var n;if(p&&p.length){(n=r).bind(a,q)}else{if(o&&m&&m.length){(n=o).bind(a,q)}else{x.resolve()}}x.promise.then(function(){n&&n.unbind(a,q);r.removeClass(v);o&&o.removeClass(w)});x.promise.cancel=function(){x.resolve()};return x.promise}}]});angular.module("ajoslin.mobile-navigate").provider("$navigate",function(){this.$get=["$rootScope","$location","$route",function(g,e,f){var a={},b=[];function i(o,p,n){var l=o,j=p||"slide",m=n,k;this.transition=function(){var q;if(k){q=k;k=null}else{q=j}return q};this.path=function(){return l};this.reverse=function(){return m};this.transitionOnce=function(q){k=q}}function c(j,m,l,k){g.$broadcast("$pageTransitionStart",j,m,l,k);a.current=a.next}a.onRouteSuccess=null;function h(j,k,l){a.current&&b.push([a.current,k]);a.next=new i(e.path());a.next.transitionOnce("none");c(a.next);a.onRouteSuccess=null}g.$on("$routeChangeSuccess",function(j,k,l){if(!k.$$route||!k.$$route.redirectTo){(a.onRouteSuccess||h)(j,k,l)}g.$broadcast("$pageNaved",b,k,l)});a.go=function d(k,l,j){if(typeof l=="boolean"){j=l;l=null}e.path(k);a.onRouteSuccess=function(m,n,o){a.current&&b.push([a.current,n]);a.next=new i(k,l||(n.$$route&&n.$$route.transition),j);c(a.next,a.current,false)}};a.eraseHistory=function(k,j){b=[];if(j){b.push([k,j])}return b};a.getHistory=function(){return b};a.back=function(){try{if(b.length>0){var j=b[b.length-1][0];e.path(j.path());a.onRouteSuccess=function(){b.pop();a.next=j;c(a.next,a.current,true,true)};return true}return false}catch(k){return false}};return a}]});angular.module("ajoslin.mobile-navigate").directive("mobileView",["$rootScope","$compile","$controller","$route","$change","$q",function(b,e,a,g,d,c){function f(l,j,i){function k(m){var o=g.current,n=o&&o.locals;m.element=angular.element(document.createElement("div"));m.element.html(n.$template);m.element.addClass("mb-page");m.scope=l.$new();if(o.controller){n.$scope=m.scope;m.controller=a(o.controller,n);m.element.contents().data("$ngControllerController",m.controller)}e(m.element.contents())(m.scope);if(n&&n.$template){j.append(m.element)}m.scope.$emit("$viewContentLoaded");m.scope.$eval(i.onLoad);return m}var h;l.$on("$pageTransitionStart",function(q,p,r,o,n){function m(){var v=g.current&&g.current.$$route||{};if(n){o=true}var w=o?r.transition():p.transition();k(p);if(p.reverse()||v.reverse){if(!n){o=!o}}function t(){var x=d(p.element,(r?r.element:null),w,o);x.then(function(){if(r){b.$broadcast("$pageTransitionSuccess",p,r);r.scope.$destroy();r.element.remove();r=undefined}});return x}p.element.css("display","none");var s=l.$eval(i.deferTransition)||c.when();s.cancel=function(){u=true;p.element.css("display","")};var u=false;s.then(function(){if(!u){p.element.css("display","");return t()}});return s}h&&h.cancel();h=m(p,r,o)})}return{restrict:"EA",link:f}}]).directive("scrollable",["$route",function(b){var a={};return{restrict:"EA",link:function(f,h,d){var c=b.current?b.current.$$route:{};var e=c.templateUrl||c.template;var g=h[0];if(e){setTimeout(function(){var i=a[e];if(i){g.scrollTop=i}});f.$on("$destroy",function(){a[e]=g.scrollTop})}}}}]);